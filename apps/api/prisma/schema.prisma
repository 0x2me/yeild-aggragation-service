generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model YieldOpportunity {
  id         String   @id @default(cuid())
  name       String
  provider   String
  asset      String
  chain      String
  apr        Int      // APR in basis points (100 = 1%)
  category   String
  liquidity  String
  riskScore  Int      @map("risk_score")
  updatedAt  DateTime @updatedAt @map("updated_at")
  createdAt  DateTime @default(now()) @map("created_at")

  @@unique([provider, asset, chain])
  @@index([chain])
  @@index([provider])
  @@index([category])
  @@map("yield_opportunities")
}

model ProviderRefreshLog {
  id        String   @id @default(cuid())
  provider  String
  status    String
  rows      Int      @default(0)
  message   String?
  fetchedAt DateTime @default(now()) @map("fetched_at")

  @@index([provider])
  @@index([fetchedAt])
  @@map("provider_refresh_logs")
}